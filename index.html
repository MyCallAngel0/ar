<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
</style>

<body style="margin:0; overflow:hidden;">
  <div class="arjs-loader">
    <div>Loading, please wait...</div>
  </div>

  <a-scene
    vr-mode-ui="enabled: false;"
    renderer="logarithmicDepthBuffer: true;"
    embedded
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  >

    <!-- 1 — House -->
    <a-nft
      id="marker1"
      type="nft"
      url="https://raw.githubusercontent.com/MyCallAngel0/ar/master/nft/grass/grass"
      smooth="true"
      smoothCount="10"
      smoothTolerance=".01"
      smoothThreshold="5"
    >
      <a-entity
        id="house"
        position="0 0 0"
        scale="200 200 200"
        rotation="-90 0 0"
        gltf-model="./models/house_minecraft.glb"
      ></a-entity>

      <a-text 
          value="After a long day of mining you go home. You were so tired you could just drop on the FLOOR as soon as you enter" 
          color="white" 
          width="500" 
          rotation="-90 0 0 "
          position="-300 0 0"
        ></a-text>`
    </a-nft>

    <!-- 2 — Herobrine -->
    <a-nft
      id="marker2"
      type="nft"
      url="https://raw.githubusercontent.com/MyCallAngel0/ar/master/nft/planks/planks"
      smooth="true"
      smoothCount="10"
      smoothTolerance=".01"
      smoothThreshold="5"
    >
      <a-entity
        id="herobrine"
        position="0 0 0"
        scale="50 50 50"
        rotation="90 -180 0"
        gltf-model="./models/herobrine.gltf"
        visible="false"
      ></a-entity>

      <a-text 
          value="Inside your house stands Herobrine! Your instincts tell you to fight back. Something unfortunate happened. Your game crashed. When you tried to enter back in the game, the LOGO was in black and white" 
          color="white" 
          width="500" 
          rotation="-90 0 0 "
          position="-300 -200 -30"
        ></a-text>`
    </a-nft>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    let scanned1 = false;
    let scanned2 = false;

    // Unlock Mars when Sun scanned
    document.querySelector("#marker1").addEventListener("markerFound", () => {
      scanned1 = true;
      document.querySelector("#house").setAttribute("visible", true);
    });

    // Unlock Moon when Sun & Mars scanned
    document.querySelector("#marker2").addEventListener("markerFound", () => {
      if (scanned1) {
        scanned2 = true;
        document.querySelector("#herobrine").setAttribute("visible", true);
      }
    });
    
  </script>
